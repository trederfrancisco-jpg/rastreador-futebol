<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rastreador AvanÃ§ado</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#121212; color:white; display:flex; height:100vh; }
    #sidebar { width:320px; background:#1e1e1e; padding:20px; box-sizing:border-box; overflow-y:auto; position:relative; }
    #content { flex-grow:1; padding:20px; box-sizing:border-box; overflow-y:auto; background:#222; }
    .logo { position:absolute; top:15px; left:20px; width:280px; height:50px; background:linear-gradient(135deg, #0ea5b7, #25D366); color:white; font-weight:bold; border-radius:10px; padding:10px 15px; display:flex; align-items:center; z-index:1000; font-size:1.1rem; }
    .logo svg { width:40px; height:40px; margin-right:12px; }
    select { width:100%; padding:10px; margin-bottom:15px; background:#333; border:none; color:white; border-radius:4px; font-size:1rem; cursor:pointer; }
    .info-box { background:#ff9800; color:black; padding:8px; border-radius:4px; font-weight:bold; text-align:center; margin-bottom:15px; }
    #results { margin-top:15px; max-height:70vh; overflow-y:auto; background:#121212; padding:10px; border-radius:6px; }
    .item { padding:12px 10px; border-bottom:1px solid #444; }
    .error { color:#ff6b6b; font-weight:bold; text-align:center; }
    .confidence-high { color:#4caf50; font-weight:bold; }
    .confidence-medium { color:#ff9800; font-weight:bold; }
    .details { font-size:0.9em; color:#ccc; margin-top:6px; line-height:1.5; }
    .tip { font-style:italic; color:#bbb; margin-top:15px; text-align:center; }
    nav button { padding:10px; background:#333; border:none; color:white; border-radius:4px; cursor:pointer; text-align:left; margin-bottom:5px; width:100%; }
    nav button.active { background:#ff9800; color:black; font-weight:bold; }
    .vip-button { background:linear-gradient(45deg, #ff8a00, #e52e71); color:white; font-weight:bold; border:none; padding:10px; border-radius:4px; cursor:pointer; width:100%; margin-bottom:5px; text-align:center; }
    a.link-tabela { display:block; margin:10px 0; color:#0ea5b7; text-decoration:none; }
    a.link-tabela:hover { text-decoration:underline; }
  </style>
</head>
<body>

  <div id="sidebar">
    <div class="logo">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 20 L80 20 M20 20 L20 80 M20 80 L80 80 M80 20 L80 80" stroke="#fff" stroke-width="2.5" fill="none"/>
        <circle cx="30" cy="30" r="5" fill="#fff"/>
        <circle cx="50" cy="30" r="5" fill="#fff"/>
        <circle cx="70" cy="30" r="5" fill="#fff"/>
        <circle cx="30" cy="50" r="5" fill="#fff"/>
        <circle cx="50" cy="50" r="5" fill="#fff"/>
        <circle cx="70" cy="50" r="5" fill="#fff"/>
        <circle cx="30" cy="70" r="5" fill="#fff"/>
        <circle cx="50" cy="70" r="5" fill="#fff"/>
        <circle cx="70" cy="70" r="5" fill="#fff"/>
      </svg>
      <span>Rastreador AvanÃ§ado</span>
    </div>

    <div style="margin-top:70px;">
      <label for="leagueSelect">Selecione Campeonato:</label>
      <select id="leagueSelect" onchange="loadData()">
        <option value="">Selecione um campeonato</option>
        <option value="71">ğŸ‡§ğŸ‡· BrasileirÃ£o SÃ©rie A</option>
        <option value="72">ğŸ‡§ğŸ‡· BrasileirÃ£o SÃ©rie B</option>
        <option value="39">ğŸ´ Premier League</option>
        <option value="140">ğŸ‡ªğŸ‡¸ La Liga</option>
        <option value="78">ğŸ‡©ğŸ‡ª Bundesliga</option>
        <option value="135">ğŸ‡®ğŸ‡¹ Serie A</option>
        <option value="61">ğŸ‡«ğŸ‡· Ligue 1</option>
        <option value="10217">âš½ BrasileirÃ£o Feminino</option>
      </select>
    </div>

    <div id="tabelaLink"></div>
    <div id="sidebarInfo" class="info-box">Selecione um campeonato.</div>

    <nav>
      <button id="btnChance" class="active" onclick="setTab('chance')">ğŸ¯ Chance de VitÃ³ria</button>
      <button onclick="togglePressureAlertVIP()" class="vip-button">ğŸ” Alerta de PressÃ£o VIP</button>
      <button onclick="showHiddenConflicts()" class="vip-button">ğŸ” Conflitos Ocultos (VIP)</button>
      <button onclick="showReactionChain()" class="vip-button">ğŸŒªï¸ ReaÃ§Ã£o em Cadeia (VIP)</button>
    </nav>
  </div>

  <div id="content">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
      <h2 id="contentTitle" style="margin:0; font-size:1.5rem;">Times com Alta Probabilidade de VitÃ³ria</h2>
      <a href="https://wa.me/5511998545662?text=OlÃ¡, quero assinar o Rastreador PRO" target="_blank" style="padding:10px 15px; background:#25D366; border:none; color:white; border-radius:6px; cursor:pointer; font-weight:bold; font-size:1rem; text-decoration:none; min-width:240px; text-align:center;">
        ğŸš€ QUERO ASSINAR O RASTREADOR PRO
      </a>
    </div>

    <div id="results">
      <p class="tip">Selecione um campeonato para ver os times.</p>
    </div>
  </div>

  <div id="paymentModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:999; padding:20px; color:white;">
    <div style="max-width:500px; margin:50px auto; background:#121212; padding:20px; border-radius:10px;">
      <h2 style="color:#ff9800; text-align:center;">ğŸ” Acesso VIP Liberado</h2>
      <p style="text-align:center; color:#ccc;">Assine o <strong>Rastreador PRO</strong></p>
      <a href="https://wa.me/5511998545662?text=Quero+assinar+o+Rastreador+PRO+com+Alerta+VIP" target="_blank" style="background:#25D366; color:black; padding:15px; text-align:center; display:block; border-radius:6px; font-weight:bold; text-decoration:none;">
        ğŸš€ QUERO O VIP (via WhatsApp)
      </a>
      <button onclick="closePaymentModal()" style="background:#555; border:none; color:white; padding:10px; width:100%; margin-top:10px; border-radius:6px;">Fechar</button>
    </div>
  </div>

<script>
const HOJE = new Date();
let teamResults = {};
const leagueSelect = document.getElementById("leagueSelect");
const resultsDiv = document.getElementById("results");
const sidebarInfo = document.getElementById("sidebarInfo");
const tabelaLink = document.getElementById("tabelaLink");

const leagueNames = {
  "71":"BrasileirÃ£o SÃ©rie A","72":"BrasileirÃ£o SÃ©rie B","39":"Premier League","140":"La Liga","78":"Bundesliga","135":"Serie A","61":"Ligue 1","10217":"BrasileirÃ£o Feminino"
};

const leagueLinks = {
  "71":"https://www.sofascore.com/tournament/brazil/serie-a/328",
  "72":"https://www.sofascore.com/tournament/brazil/serie-b/329",
  "39":"https://www.sofascore.com/tournament/england/premier-league/17",
  "140":"https://www.sofascore.com/tournament/spain/laliga/8",
  "78":"https://www.sofascore.com/tournament/germany/bundesliga/35",
  "135":"https://www.sofascore.com/tournament/italy/serie-a/23",
  "61":"https://www.sofascore.com/tournament/france/ligue-1/34",
  "10217":"https://www.sofascore.com/tournament/brazil/campeonato-brasileiro-women/1154"
};

function updateTabelaLink(leagueId){
  if(leagueId && leagueLinks[leagueId]){
    tabelaLink.innerHTML=`<a href="${leagueLinks[leagueId]}" target="_blank" class="link-tabela">ğŸ” Ver tabela do ${leagueNames[leagueId]}</a>`;
  } else tabelaLink.innerHTML="";
}

async function loadData(){
  const leagueId = leagueSelect.value;
  if(!leagueId){ resultsDiv.innerHTML="<p>Selecione um campeonato.</p>"; sidebarInfo.textContent="Selecione um campeonato."; tabelaLink.innerHTML=""; return;}
  resultsDiv.innerHTML="<p class='tip'>ğŸ”„ Carregando dados...</p>";

  try{
    const response = await fetch('data.json?'+new Date().getTime());
    if(!response.ok) throw new Error("Erro ao carregar dados");
    const data = await response.json();
    const year = "2025";
    if(data[year] && data[year][leagueId]){
      teamResults = data[year][leagueId];
      showHighChanceTeams(leagueId);
    } else resultsDiv.innerHTML="<p class='error'>âš ï¸ Nenhum dado encontrado.</p>";
  }catch(err){ console.error(err); resultsDiv.innerHTML="<p class='error'>âŒ Falha ao carregar dados.</p>";}
}

function showHighChanceTeams(leagueId){
  const teams = Object.keys(teamResults);
  const filtered = teams.filter(t=>{
    const d = teamResults[t];
    const lastGameWasLoss = d.results && d.results[d.results.length-1]==="D";
    const isTop5 = d.position>=1 && d.position<=5;
    const isHome = d.home_away==="Casa";
    const weakOpponent = d.opponent_table==="Z4" || d.opponent_table==="Meio da tabela";
    return isTop5 && lastGameWasLoss && isHome && weakOpponent;
  });

  if(filtered.length===0){ resultsDiv.innerHTML="<p>Nenhum time com alta probabilidade de vitÃ³ria.</p>"; sidebarInfo.textContent="VitÃ³ria e Empate: 0 jogos"; updateTabelaLink(leagueId); return;}

  let html="<div class='section-title'>ğŸ¯ VitÃ³ria e Empate (ReaÃ§Ã£o do LÃ­der)</div>";
  filtered.forEach(t=>{
    const d = teamResults[t];
    html+=`<div class='item'><strong>${t}</strong> (${d.results.join(", ")}) vs. ${d.next_opponent}<div class='confidence-high'>ğŸ“Š Probabilidade: 78%</div><div class='details'>ğŸŸï¸ ${d.home_away} | ğŸ“… ${d.scheduled_date} Ã s ${d.match_time}<br>âš”ï¸ Adv: ${d.opponent_table} (${d.form_opponent.join(",")})<br>ğŸ’¡ Dica: Time do G4, perdeu antes, precisa reagir!</div></div>`;
  });
  html+="<div class='tip'>ğŸ’¡ EstratÃ©gia: Cobrir vitÃ³ria + empate â†’ seguranÃ§a mÃ¡xima</div>";
  resultsDiv.innerHTML=html;
  sidebarInfo.textContent=`VitÃ³ria e Empate: ${filtered.length} jogos`;
  updateTabelaLink(leagueId);
}

function showHiddenConflicts(){
  const isVIP = localStorage.getItem('user_plan')==='vip';
  if(!isVIP){ openPaymentModal(); return; }

  const today = HOJE.toLocaleDateString('pt-BR');
  const conflicts=[];
  for(const teamName in teamResults){
    const d=teamResults[teamName];
    const matchDate=new Date(d.scheduled_date.split('/').reverse().join('-'));
    const todayDate=new Date(today.split('/').reverse().join('-'));
    const isTop5=d.position>=1 && d.position<=5;
    const isHome=d.home_away==="Casa";
    const lastGameWasLoss=d.results && d.results[d.results.length-1]==="D";
    const opponentInGoodForm=d.form_opponent && d.form_opponent.includes("V");
    if(isTop5 && isHome && lastGameWasLoss && opponentInGoodForm) conflicts.push({team:teamName, opponent:d.next_opponent, league:leagueNames[leagueSelect.value]});
  }
  if(conflicts.length===0){ resultsDiv.innerHTML="<p class='error'>âš ï¸ Nenhum conflito oculto identificado hoje.</p>"; return; }
  let html="<div class='section-title'>ğŸ” CONFLITOS OCULTOS (VIP)</div>";
  conflicts.forEach(c=>{ html+=`<div class='item'><strong>${c.team}</strong> vs. ${c.opponent} <em>(${c.league})</em><div class='confidence-medium'>âš ï¸ Conflito: PressÃ£o vs. Forma</div><div class='details'>ğŸ’¡ Apostar em Empate</div></div>`; });
  resultsDiv.innerHTML=html;
}

function togglePressureAlertVIP(){
  const isVIP = localStorage.getItem('user_plan')==='vip';
  if(!isVIP){ openPaymentModal(); return; }

  const alerts = Object.keys(teamResults).filter(t=>{
    const d = teamResults[t];
    const isLosingStreak = d.results && d.results.slice(-2).every(r=>r!=="V");
    const opponentWonBefore = d.form_opponent && d.form_opponent.includes("V");
    return isLosingStreak && opponentWonBefore;
  });

  if(alerts.length===0){ resultsDiv.innerHTML="<p class='error'>âš ï¸ Nenhum alerta de pressÃ£o encontrado.</p>"; return; }

  let html="<div class='section-title'>ğŸ” ALERTA DE PRESSÃƒO VIP</div>";
  alerts.forEach(t=>{
    const d=teamResults[t];
    html+=`<div class='item'><strong>${t}</strong> vs. ${d.next_opponent}<div class='confidence-medium'>ğŸ“… ${d.scheduled_date} Ã s ${d.match_time} | ğŸŸï¸ Casa</div><div class='details'>ğŸ’¡ Aposte em ${t} vence ou empata</div></div>`;
  });
  resultsDiv.innerHTML=html;
}

function openPaymentModal(){ document.getElementById('paymentModal').style.display='block'; }
function closePaymentModal(){ document.getElementById('paymentModal').style.display='none'; }
function showReactionChain(){ alert("Funcionalidade 'ReaÃ§Ã£o em Cadeia' ainda nÃ£o implementada."); }
function setTab(tab){ document.getElementById('btnChance').classList.toggle('active'); }

window.onload=function(){
  const urlParams=new URLSearchParams(window.location.search);
  const token=urlParams.get('token');
  if(token && token.startsWith('VIP')) localStorage.setItem('user_plan','vip');
};
</script>

</body>
</html>













































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































